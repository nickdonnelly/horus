stages:
  - mirror
  - buildwin

Mirror to gh:
  stage: mirror
  image: haffmans/git-mirror:latest
  script:
  - git-mirror "${CI_PROJECT_DIR}" git@github.com:${GITHUB_REPOSITORY}


Build Windows:
  stage: buildwin
  image: registry.gitlab.com/nickdonnelly/horus/aws-deploy-hours:windows

  script:
  - i686-w64-mingw32.static-qmake-qt5 horusqt.pro
  - make -j7
  - cd release
  - rm *.o *.h *.cpp
  - cd ..

  artifacts: # save the file 
    paths:
    - release/horusqt.exe
    expire_in: 1 week
  

# TODO: Build Linux
